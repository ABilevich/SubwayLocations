// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model State {
  id           Int     @id @default(autoincrement())
  name         String  @unique
  abbreviation String  @unique
  stores       Store[]
}

model Store {
  id             Int                                   @id @default(autoincrement())
  street_address String                                @unique
  state          State                                 @relation(fields: [state_id], references: [id])
  state_id       Int
  city           String
  country        String
  geo_coords     Unsupported("geometry(Point, 4326)")?
  latitude       String
  longitude      String
  is_open        Boolean                               @default(true)

  // the index for that column
  @@index([state_id], name: "state_idx")
  @@index([city], name: "city_idx")
  @@index([country], name: "country_idx")
  @@index([geo_coords], name: "location_idx", type: Gist)
}
